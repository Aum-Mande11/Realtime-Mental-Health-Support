<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Health Bot</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-container">
      <div class="navbar-logo">Health Bot</div>
      <ul class="navbar-menu">
        {% if session["userId"] %}
        <li class="navbar-user">Welcome, <span id="username">{{ session["userName"] }}</span></li>
        <li><a href="/logout" class="navbar-logout">Logout</a></li>
        {% else %}
        <li><a href="/login" class="navbar-login">Login</a></li>
        {% endif %}
      </ul>
    </div>
  </nav>

  {% if session["userId"] %}

  <!-- Chatbot Section -->
  <div class="title">
    <svg viewBox="0 0 640 512" title="robot">
      <path fill="currentColor"
        d="M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z" />
    </svg>
    <h3>Chatbot</h3>

    <div>
      <div id="chatbot" class="main-card collapsed">        
        <button id="chatbot_toggle">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path
              d="M15 4v7H5.17l-.59.59-.58.58V4h11m1-2H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm5 4h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z" />
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="display:none">
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path
              d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" />
          </svg>
        </button>
        <div class="main-title">
          <div>
            <svg viewBox="0 0 640 512" title="robot">
              <path fill="currentColor"
                d="M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z" />
            </svg>
          </div>
          <span>
            <i class="fas fa-bug"></i> Health Bot <i class="fas fa-bug"></i>

          </span>
        </div>

        <div id="floating-date-toast" class="floating-date-toast"></div>
        <main class="msger-chat" data-last-date="">
          <!-- Chat history will be dynamically loaded here -->
        </main>

        <form class="msger-inputarea">
          <input type="text" class="msger-input" id="textInput" placeholder="Enter your message...">
          <button type="submit" class="msger-send-btn">Send</button>
        </form>
        <small class="text-black font-small text-center">Psychiatrist can make mistakes. Verify important info.</small>
      </div>
    </div>
  </div>

  {% else %}
  <p>Please log in to access the chatbot.</p>
  {% endif %}

  <script src='https://use.fontawesome.com/releases/v5.0.13/js/all.js'></script>
  <script src="{{ url_for('static', filename='js/bot.js') }}"></script>
</body>

</html>